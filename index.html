<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>My URL Shortener</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; transition: background 0.3s, color 0.3s; }
    body.dark { background: #121212; color: #eee; }
    .toggle { position: fixed; top: 1rem; right: 1rem; }
    input, button { font-size: 1rem; padding: 0.5rem; }
    label { display: block; margin-bottom: 0.5rem; }
  </style>
</head>
<body>
  <!-- Light/Dark mode toggle -->
  <label class="toggle">
    Dark Mode: <input type="checkbox" id="modeToggle">
  </label>

  <h1>Shorten a URL</h1>
  <form id="shortenForm">
    <label>Destination URL:<br>
      <input type="url" name="longUrl" placeholder="https://example.com/..." required>
    </label>
    <label>Short Slug:<br>
      <input type="text" name="slug" placeholder="e.g. my-link" required>
    </label>
    <button type="submit">Create Short URL</button>
  </form>
  <p id="status"></p>

  <script>
    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark');
    document.getElementById('modeToggle').checked = document.body.classList.contains('dark');
    // Toggle handler
    document.getElementById('modeToggle').addEventListener('change', function() {
      document.body.classList.toggle('dark');
      localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });

    // On form submit, call the Apps Script to create the short link
    const form = document.getElementById('shortenForm');
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const longUrl = encodeURIComponent(form.longUrl.value);
      const slug = encodeURIComponent(form.slug.value);
      const webAppURL = 'YOUR_SCRIPT_WEB_APP_URL';
      const res = await fetch(`${webAppURL}?add=${slug}&url=${longUrl}`);
      const text = await res.text();
      document.getElementById('status').textContent = text;
    });
  </script>
</body>
</html>
